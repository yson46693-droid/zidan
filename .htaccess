# إعدادات InfinityFree - حل مشكلة 404

# السماح بملفات HTML
<FilesMatch "\.html$">
    Order allow,deny
    Allow from all
</FilesMatch>

# ضمان تقديم ملفات HTML بشكل صحيح
AddType text/html .html
AddDefaultCharset UTF-8

# السماح بملفات CSS و JS
<FilesMatch "\.(css|js)$">
    Order allow,deny
    Allow from all
</FilesMatch>

# ضمان تقديم ملفات CSS بشكل صحيح
<IfModule mod_mime.c>
    AddType text/css .css
    AddType application/javascript .js
    AddType text/javascript .js
    # MIME types لـ Service Worker و Manifest - ضروري للعمل الصحيح
    AddType application/manifest+json .webmanifest
    AddType application/manifest+json manifest.json
    AddType application/json .json
</IfModule>

# إعدادات خاصة لـ Service Worker (sw.js)
<Files "sw.js">
    <IfModule mod_headers.c>
        Header set Content-Type "application/javascript; charset=utf-8"
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </IfModule>
</Files>

# إعدادات خاصة لـ Manifest (manifest.json)
<Files "manifest.json">
    <IfModule mod_headers.c>
        Header set Content-Type "application/manifest+json; charset=utf-8"
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </IfModule>
</Files>

# إعدادات CORS الأساسية
<IfModule mod_headers.c>
    # السماح بملفات HTML و CSS و JS
    <FilesMatch "\.(html|css|js)$">
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type, X-Requested-With"
    </FilesMatch>
</IfModule>

# منع عرض محتويات المجلدات
Options -Indexes

# معالجة الأخطاء - عدم إعادة توجيه ملفات JS و JSON إلى HTML
# ErrorDocument 404 /index.html (تم التعليق لمنع مشاكل Service Worker)

