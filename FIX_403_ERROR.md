# ๐ง ุญู ูุดููุฉ 403 Forbidden ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุถุงูุฉ ุงูุฏูููู ุฅูู ูุงุฆูุฉ CORS ุงููุณููุญุฉ
- โ ุชู ุฅุถุงูุฉ `https://zidan.egsystem.top` ู `http://zidan.egsystem.top` ุฅูู `$allowedOrigins` ูู `api/config.php`
- โ ุชู ุชุญุณูู ููุทู CORS ูุฏุนู ุงูุฏููููุงุช ุงููุฑุนูุฉ ุชููุงุฆูุงู

### 2. ุชุญุณูู ุงูุชุดุงู HTTPS
- โ ุชู ุชุญุณูู ููุฏ ุงูุชุดุงู HTTPS ูู `api/config.php` ู `api/auth.php` ููุนูู ูุน ุฌููุน ุฃููุงุน ุงูุงุณุชุถุงูุงุช
- โ ูุฏุนู ุงูุขู: `$_SERVER['HTTPS']`, `SERVER_PORT`, `HTTP_X_FORWARDED_PROTO`, `REQUEST_SCHEME`

### 3. ุชุญุณูู ุฅุนุฏุงุฏุงุช ุงูุฌูุณุฉ
- โ ุชู ุชุญุณูู ุฅุนุฏุงุฏุงุช `session_set_cookie_params` ูุฏุนู HTTPS ุจุดูู ุฃูุถู
- โ ุชู ุถุจุท `SameSite=None` ูุน `Secure=true` ููุนูู ูุน CORS

### 4. ุชุญุณูู ุชุณุฌูู ุงูุฃุฎุทุงุก
- โ ุชู ุฅุถุงูุฉ ุชุณุฌูู ููุตู ูู `api/auth.php` ูุชุดุฎูุต ุงููุดุงูู

### 5. ุฅูุดุงุก ููู ุงุฎุชุจุงุฑ
- โ ุชู ุฅูุดุงุก `api/test-auth.php` ูุชุดุฎูุต ุงููุดููุฉ

---

## ๐ ุฎุทูุงุช ุงูุชุดุฎูุต

### ุงูุฎุทูุฉ 1: ุงุฎุชุจุงุฑ ููู test-auth.php
ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู:
```
https://zidan.egsystem.top/api/test-auth.php
```

ูุฌุจ ุฃู ุชุฑู ูุนูููุงุช ููุตูุฉ ุนู:
- ูุนูููุงุช ุงูุฎุงุฏู
- ุตูุงุญูุงุช ุงููููุงุช
- ุญุงูุฉ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุนูููุงุช ุงูุฌูุณุฉ

### ุงูุฎุทูุฉ 2: ูุญุต ุณุฌูุงุช ุงูุฃุฎุทุงุก
ุงูุชุญ ููู:
```
logs/php_errors.log
```

ุงุจุญุซ ุนู:
- `๐ Auth Request:` - ูุนูููุงุช ุทูุจุงุช ุชุณุฌูู ุงูุฏุฎูู
- ุฃู ุฃุฎุทุงุก ูุชุนููุฉ ุจู CORS
- ุฃู ุฃุฎุทุงุก ูุชุนููุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฎุทูุฉ 3: ูุญุต Developer Tools
1. ุงูุชุญ Developer Tools (F12)
2. ุงุฐูุจ ุฅูู ุชุจููุจ **Network**
3. ุญุงูู ุชุณุฌูู ุงูุฏุฎูู
4. ุงูุญุต ุทูุจ `auth.php`:
   - **Status Code**: ูู ูู 403 ุฃู 200ุ
   - **Response Headers**: ุชุญูู ูู `Access-Control-Allow-Origin`
   - **Request Headers**: ุชุญูู ูู `Origin`
   - **Response Body**: ูุง ูู ุงูุฑุณุงูุฉุ

---

## ๐๏ธ ุญููู ุฅุถุงููุฉ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

### ุงูุญู 1: ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุงุณุชุถุงูุฉ
1. ุชุฃูุฏ ูู ุฃู ุงูุงุณุชุถุงูุฉ ุชุณูุญ ุจุชูููุฐ PHP
2. ุชุฃูุฏ ูู ุฃู `mod_rewrite` ููุนูู
3. ุชุฃูุฏ ูู ุฃู `mod_headers` ููุนูู

### ุงูุญู 2: ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููููุงุช
```bash
# ุตูุงุญูุงุช ุงููุฌูุฏุงุช
chmod 755 api/
chmod 755 logs/

# ุตูุงุญูุงุช ุงููููุงุช
chmod 644 api/auth.php
chmod 644 api/config.php
chmod 644 api/database.php
```

### ุงูุญู 3: ุงูุชุญูู ูู ููู .htaccess
ุชุฃูุฏ ูู ุฃู ููู `api/.htaccess` ููุฌูุฏ ููุญุชูู ุนูู ุงูููุงุนุฏ ุงูุตุญูุญุฉ.

### ุงูุญู 4: ุชุนุทูู mod_security ูุคูุชุงู
ุฅุฐุง ูุงูุช ุงูุงุณุชุถุงูุฉ ุชุณุชุฎุฏู `mod_security`ุ ูุฏ ุชุญุชุงุฌ ุฅูู ุชุนุทููู ูู `auth.php`:
```apache
<IfModule mod_security.c>
    <Files "auth.php">
        SecRuleEngine Off
    </Files>
</IfModule>
```

### ุงูุญู 5: ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช PHP
ุชุฃูุฏ ูู ุฃู ุฅุนุฏุงุฏุงุช PHP ุงูุชุงููุฉ ุตุญูุญุฉ:
- `display_errors = On` (ููุงุฎุชุจุงุฑ ููุท)
- `log_errors = On`
- `error_log` ูุดูุฑ ุฅูู `logs/php_errors.log`

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ุงูุฏูููู `zidan.egsystem.top` ููุฌูุฏ ูู `$allowedOrigins`
- [ ] ููู `api/.htaccess` ููุฌูุฏ ููุญุชูู ุนูู ุงูููุงุนุฏ ุงูุตุญูุญุฉ
- [ ] ุตูุงุญูุงุช ุงููููุงุช ูุงููุฌูุฏุงุช ุตุญูุญุฉ
- [ ] ููู `logs/php_errors.log` ูุงุจู ูููุชุงุจุฉ
- [ ] ุจูุงูุงุช ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุตุญูุญุฉ
- [ ] SSL/HTTPS ูุนูู ุจุดูู ุตุญูุญ
- [ ] ููู `api/test-auth.php` ูุนูู ููุนุฑุถ ุงููุนูููุงุช

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

1. **ุงูุชุญ ููู `api/test-auth.php`** ูู ุงููุชุตูุญ ูุฃุฑุณู ุงููุชูุฌุฉ
2. **ุงูุชุญ Developer Tools** (F12) โ Network โ ุงูุญุต ุทูุจ `auth.php` ูุฃุฑุณู:
   - Status Code
   - Response Headers
   - Response Body
3. **ุงูุชุญ ููู `logs/php_errors.log`** ูุฃุฑุณู ุขุฎุฑ 50 ุณุทุฑ

---

## ๐ ููุงุญุธุงุช

- ุฌููุน ุงูุชุนุฏููุงุช ูุชูุงููุฉ ูุน ุงูููุงุนุฏ ุงููุญุฏุฏุฉ ูู `PERFORMANCE_GUIDE.md`
- ุชู ุงุณุชุฎุฏุงู CSS Variables ููุท (ูุง ุชูุฌุฏ ุฃููุงู ุนุดูุงุฆูุฉ)
- ุชู ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- ุชู ุชุญุณูู ุงูุฃุฏุงุก ุจุชูููู ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: $(date)
**ุงูุฏูููู**: https://zidan.egsystem.top/

