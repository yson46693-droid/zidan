# إعدادات خاصة بمجلد API

# تفعيل PHP
AddType application/x-httpd-php .php

# ملاحظة: إعدادات CORS والأمان يتم ضبطها من config.php ديناميكياً
# هذا يمنع التعارضات ويضمن عمل credentials بشكل صحيح

# معالجة طلبات OPTIONS (preflight) - نسخة احتياطية
# config.php يتعامل معها أيضاً، لكن نتركها للاستضافات التي قد تحتاجها
RewriteEngine On
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ - [R=200,L]

# إعادة توجيه طلبات PUT/DELETE إلى POST للاستضافات المجانية
RewriteCond %{REQUEST_METHOD} ^(PUT|DELETE)$
RewriteRule ^(.*)$ $1 [L]

# السماح بملفات API العامة
# استخدام صيغة متوافقة مع Apache 2.2 و 2.4+ و LiteSpeed
<IfModule mod_authz_core.c>
    # Apache 2.4+ و LiteSpeed
    <FilesMatch "\.(php)$">
        Require all granted
    </FilesMatch>
</IfModule>

<IfModule !mod_authz_core.c>
    # Apache 2.2 (fallback للخوادم القديمة)
    <FilesMatch "\.(php)$">
        Order allow,deny
        Allow from all
    </FilesMatch>
</IfModule>
